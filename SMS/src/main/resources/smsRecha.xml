<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="rechans">
	<resultMap id="rechaResult" 	type="recha">
		<result property="rep_no" 			column="rep_no" />
		<result property="cha_no" 			column="cha_no" />
		<result property="cha_re_cont" 	column="cha_re_cont" />
		<result property="mem_no" 		column="mem_no" />
		<result property="regdate" 		column="regdate" />
		<result property="updatedate"	column="updatedate" />
		<result property="del"			column="del" />
	</resultMap>
	<select id="list" parameterType="int" resultMap="rechaResult">
		select * from SMS_cha_reply where cha_no=#{cha_no} order by rep_no  
	</select>
	<insert id="insert" parameterType="recha">
		<selectKey keyProperty="rep_no" order="BEFORE" resultType="int">
			select nvl(max(rep_no),0)+1 rep_no from SMS_cha_reply
		</selectKey>
		insert into SMS_cha_reply values(#{rep_no},#{cha_no},
			#{cha_re_cont},#{mem_no},sysdate,sysdate,'n')
	</insert>
	<update id="delete" parameterType="int">
		update SMS_cha_reply set del = 'y' where rep_no=#{rep_no} 
	</update>
	<update id="update" parameterType="recha">
		update SMS_cha_reply set cha_re_cont=#{cha_re_cont}, regdate=sysdate,updatedate=sysdate where rep_no=#{rep_no}
	</update>
</mapper>